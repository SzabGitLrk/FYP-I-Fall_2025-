<% layout("/layouts/boilerplate") %>

<body class="bg-light">
  <section class="py-5">
    <div class="container">

      <h2 class="fw-bold text-success mb-4">Claimed Donations</h2>

      <!-- Flash Message (optional) -->
      <% if (locals.error && locals.error.length) { %>
        <div class="alert alert-danger"><%= locals.error[0] %></div>
      <% } %>
      <% if (locals.success && locals.success.length) { %>
        <div class="alert alert-success"><%= locals.success[0] %></div>
      <% } %>

      <% if (!donations || donations.length === 0) { %>
        <div class="alert alert-info">You have not claimed any donations yet.</div>
      <% } else { %>
        <div class="row g-4">
          <% donations.forEach(donation => { %>
            <div class="col-md-6">
              <div class="card shadow-sm p-4 h-100">
                <h5 class="fw-bold mb-3">
                  <%= donation.item_name || "Food info not available" %>
                </h5>
                <p>
                  <strong>Donor:</strong>
                  <%= donation.donor_id ? donation.donor_id.name : "Unknown" %>
                </p>
                <p>
                  <strong>Quantity:</strong>
                  <%= donation.quantity || "N/A" %>
                </p>
                <p>
                  <strong>Status:</strong> <%= donation.status %>
                </p>
                <p>
                  <strong>Claimed At:</strong>
                  <%= donation.claimedAt ? donation.claimedAt.toLocaleString() : "N/A" %>
                </p>
              </div>
            </div>
          <% }) %>
        </div>
      <% } %>

      <!-- Back to Dashboard Button -->
      <div class="mt-5 text-center">
        <a href="/ngo/dashboard" class="btn btn-outline-success fw-bold">
          ‚Üê Back to Dashboard
        </a>
      </div>

    </div>
  </section>
</body>
