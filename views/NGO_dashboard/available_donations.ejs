<% layout("/layouts/boilerplate") %>

<div class="container py-5">

  <h2 class="text-success fw-bold mb-4 text-center">ðŸŒ¿ Available Food Donations</h2>

  <!-- Filters Form -->
  <form method="GET" action="/ngo/available-donations" class="row g-3 mb-4 p-4 bg-white shadow rounded mx-auto" style="max-width: 900px;">
    <div class="col-md-4">
      <input type="text" 
             name="city" 
             class="form-control border-success"
             placeholder="Search by City"
             value="<%= city || '' %>">
    </div>

    <!-- <div class="col-md-4">
      <select name="type" class="form-select border-success">
        <option value="">All Types</option>
        <option value="Cooked" <%= type==="Cooked" ? "selected" : "" %>>Cooked</option>
        <option value="Uncooked" <%= type==="Uncooked" ? "selected" : "" %>>Uncooked</option>
        <option value="Packaged" <%= type==="Packaged" ? "selected" : "" %>>Packaged</option>
      </select>
    </div> -->

    <div class="col-md-4">
      <button class="btn btn-success w-100 fw-bold">Apply Filters</button>
    </div>
  </form>

  <!-- Donation Cards -->
  <div class="row">
    <% if (donations.length === 0) { %>
      <p class="text-center text-muted">No donations available at the moment.</p>
    <% } %>

    <% donations.forEach(d => { %>
      <div class="col-md-4 mb-4">
        <div class="card shadow-sm h-100">
          <div class="card-body d-flex flex-column">
            <h5 class="fw-bold text-success"><%= d.food_title %></h5>
            <p class="mb-1"><%= d.food_description %></p>
            <p class="mb-1"><strong>Type:</strong> <%= d.food_type %></p>
            <p class="mb-1"><strong>Quantity:</strong> <%= d.quantity %></p>
            <p class="mb-1"><strong>Pickup City:</strong> <%= d.pickup_city %></p>
            <p class="mb-3"><strong>Donor:</strong> <%= d.donor_id ? d.donor_id.name : "Unknown" %></p>
<form method="POST" action="/ngo/claim/<%= d._id %>" class="mt-auto">
  <button class="btn btn-success w-100 fw-bold">Claim Donation</button>
</form>

          </div>
        </div>
      </div>
    <% }); %>
  </div>

  <!-- Back Button -->
  <div class="text-center mt-4">
    <a href="/ngo/dashboard" class="btn btn-outline-success px-5 fw-bold">
      â¬… Back to Dashboard
    </a>
  </div>

</div>

<style>
  body {
    background: linear-gradient(135deg, #e8f5e9, #ffffff);
    font-family: 'Segoe UI', sans-serif;
  }

  form input, form select {
    border-radius: 10px;
    padding: 10px;
  }

  form input:focus, form select:focus {
    border-color: #157347;
    box-shadow: 0 0 5px rgba(21, 115, 71, 0.3);
  }

  .card {
    border-radius: 15px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
  }

  .btn-success, .btn-outline-success {
    font-weight: 600;
    border-radius: 10px;
    padding: 10px 20px;
    transition: 0.2s;
  }

  .btn-success:hover {
    background-color: #146c43;
  }
</style>
